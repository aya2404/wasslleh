# دليل إعداد المشروع للمطورين
## موقع وصلة - جسرٌ نحو مجتمع شامل

---

## 🚀 البدء السريع

هذا الدليل مخصص للمطورين الذين يرغبون في العمل على مشروع وصلة أو إعداد بيئة التطوير المحلية.

---

## 📋 المتطلبات الأساسية

### البرامج المطلوبة:
- **Node.js** (الإصدار 18.0.0 أو أحدث)
- **npm** أو **yarn** (مدير الحزم)
- **Git** (لإدارة الإصدارات)
- **Visual Studio Code** (محرر النصوص المُوصى به)

### الامتدادات المفيدة لـ VS Code:
```json
{
  "recommendations": [
    "bradlc.vscode-tailwindcss",
    "ms-vscode.vscode-typescript-next",
    "esbenp.prettier-vscode",
    "ms-vscode.vscode-eslint",
    "formulahendry.auto-rename-tag",
    "christian-kohler.path-intellisense",
    "ms-vscode.vscode-json"
  ]
}
```

---

## 🛠️ إعداد بيئة التطوير

### 1. استنساخ المشروع
```bash
# استنساخ المستودع
git clone https://github.com/waslah-platform/waslah-website.git
cd waslah-website

# أو إذا كان لديك صلاحية SSH
git clone git@github.com:waslah-platform/waslah-website.git
cd waslah-website
```

### 2. تثبيت الحزم المطلوبة
```bash
# باستخدام npm
npm install

# أو باستخدام yarn
yarn install

# أو باستخدام pnpm (الأسرع)
pnpm install
```

### 3. إعداد متغيرات البيئة
```bash
# إنشاء ملف متغيرات البيئة
cp .env.example .env

# تعديل الملف بالقيم الصحيحة
nano .env  # أو استخدم محرر النصوص المفضل لديك
```

### 4. تشغيل المشروع محلياً
```bash
# تشغيل خادم التطوير
npm run dev

# الموقع سيكون متاحاً على:
# http://localhost:3000
```

---

## 📁 هيكل المشروع بالتفصيل

```
📁 waslah-website/
├── 🏠 App.tsx                           # المكون الرئيسي
├── 📦 package.json                      # تبعيات المشروع
├── ⚙️ tsconfig.json                     # إعدادات TypeScript
├── 🎨 tailwind.config.js                # إعدادات Tailwind CSS
├── 🔧 vite.config.ts                    # إعدادات Vite
├── 📝 .env.example                      # مثال على متغيرات البيئة
├── 🚫 .gitignore                        # ملفات مُتجاهلة من Git
│
├── 📂 styles/
│   ├── 🎨 globals.css                   # الأنماط العامة والوصولية
│   └── 📚 دليل_الأنماط.md              # دليل استخدام الأنماط
│
├── 📂 components/                       # مكونات React
│   ├── 🏡 WelcomePage.tsx              # صفحة الترحيب
│   ├── ⚙️ AccessibilitySettingsPanel.tsx
│   ├── 🎮 FloatingAccessibilityControls.tsx
│   ├── 🔐 LoginForm.tsx                # نموذج تسجيل الدخول
│   ├── 💼 JobOpportunitiesExplorer.tsx # استكشاف الوظائف
│   ├── 🗺️ AccessibleNavigationMaps.tsx # خرائط التنقل
│   ├── 👥 CommunitySupport.tsx         # دعم المجتمع
│   ├── 🛒 ContributeShopMarketplace.tsx
│   ├── 📷 CameraOCRPanel.tsx           # لوحة OCR للكاميرا
│   │
│   ├── 📂 ui/                          # مكونات UI الأساسية
│   │   ├── 🔘 button.tsx               # مكون الزر
│   │   ├── 🃏 card.tsx                 # مكون البطاقة
│   │   ├── 📝 input.tsx                # مكون الإدخال
│   │   ├── 🏷️ badge.tsx                # مكون الشارة
│   │   └── ... (50+ مكون UI)
│   │
│   ├── 📂 services/                    # خدمات وAPI
│   │   ├── 🌍 TranslationService.tsx   # خدمة الترجمة
│   │   ├── 🔊 TTSService.tsx           # خدمة التحويل النصي للصوت
│   │   ├── 👤 UserService.tsx          # خدمة المستخدمين
│   │   ├── 🗺️ GoogleMapsService.tsx    # خدمة خرائط Google
│   │   ├── 💼 LinkedInJobsService.tsx  # خدمة وظائف LinkedIn
│   │   ├── 📷 OCRService.tsx           # خدمة OCR
│   │   └── 📚 دليل_الخدمات.md         # دليل الخدمات
│   │
│   └── 📂 figma/
│       └── 🖼️ ImageWithFallback.tsx    # مكون الصورة مع fallback
│
├── 📂 config/                          # إعدادات المشروع
│   ├── 🔑 apiKeysManager.ts            # مدير مفاتيح API
│   ├── ✅ envValidation.ts             # التحقق من متغيرات البيئة
│   ├── ⚙️ apiConfig.ts                 # إعدادات API العامة
│   ├── 🔗 linkedinApiConfig.ts         # إعدادات LinkedIn
│   └── 📚 دليل_التكوين.md             # دليل التكوين
│
├── 📂 utils/                           # أدوات مساعدة
│   ├── 📂 supabase/
│   │   └── 📊 info.tsx                 # معلومات Supabase
│   └── 📚 دليل_الأدوات.md             # دليل الأدوات
│
├── 📂 docs/                            # التوثيق
│   ├── 🔑 API_KEYS_GUIDE.md           # دليل مفاتيح API
│   └── 📚 دليل_التوثيق.md             # دليل التوثيق العام
│
├── 📂 supabase/                        # إعدادات Supabase
│   └── 📂 functions/
│       └── 📂 server/
│           ├── 🖥️ index.tsx            # الخادم الخلفي
│           └── 🗄️ kv_store.tsx         # تخزين البيانات
│
└── 📂 guidelines/                      # إرشادات التطوير
    └── 📋 Guidelines.md                # إرشادات عامة
```

---

## 🧩 فهم المكونات الأساسية

### 1. App.tsx - المكون Aلرئيسي
```typescript
// المكون الرئيسي الذي يدير:
export default function App() {
  // - حالة المستخدم وتسجيل الدخول
  // - إعدادات الوصولية
  // - التنقل بين الصفحات
  // - إدارة الثيم (فاتح/مظلم)
  // - إعدادات اللغة والترجمة
  
  return (
    <TranslationProvider>
      <AppContent />
    </TranslationProvider>
  );
}
```

### 2. خدمة الترجمة
```typescript
// components/services/TranslationService.tsx
export const useTranslation = () => {
  const { language, setLanguage, isRTL } = useContext(TranslationContext);
  
  const t = (key: string): string => {
    return translations[language][key] || key;
  };
  
  return { t, language, setLanguage, isRTL };
};
```

### 3. إعدادات الوصولية
```typescript
// components/services/UserService.tsx
export class AccessibilityAdapter {
  static getAdaptationSettings(disabilityType: string, language: string) {
    // إرجاع إعدادات مخصصة حسب نوع الإعاقة
  }
  
  static applyStyles(disabilityType: string) {
    // تطبيق أنماط CSS مخصصة
  }
}
```

---

## 🎨 نظام التصميم والأنماط

### لوحة الألوان الأساسية
```css
/* في styles/globals.css */
:root {
  /* لوحة الألوان الجديدة */
  --color-pastel-purple: #C4C3E3;
  --color-dark-purple: #504E76;
  --color-light-beige: #FDFBE2;
  --color-calm-green: #A3B565;
  --color-light-orange: #FCDD9D;
  --color-vibrant-orange: #F1642E;
  
  /* الخطوط */
  --font-family-headings: 'Almarai', 'Cairo', sans-serif;
  --font-family-body: 'Cairo', 'Almarai', sans-serif;
}
```

### استخدام الألوان في المكونات
```tsx
// مثال على استخدام الألوان
<div className="bg-[var(--color-light-beige)] text-[var(--color-dark-purple)]">
  <h1 className="font-heading text-[var(--color-dark-purple)]">عنوان</h1>
  <p className="font-body text-[var(--color-dark-purple)]/70">محتوى</p>
</div>
```

### classes CSS للوصولية
```css
/* أنماط للإعاقة البصرية */
.visual-impairment * {
  font-size: 1.25em !important;
  font-weight: 600 !important;
  line-height: 1.8 !important;
}

/* أنماط للإعاقة المعرفية */
.cognitive-impairment * {
  font-size: 1.15em !important;
  line-height: 1.8 !important;
  font-weight: 500 !important;
}
```

---

## 🔧 معايير التطوير

### قواعد TypeScript
```json
// tsconfig.json الأساسية
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["DOM", "DOM.Iterable", "ES6"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true
  }
}
```

### قواعد ESLint
```json
// .eslintrc.json
{
  "extends": [
    "eslint:recommended",
    "@typescript-eslint/recommended",
    "plugin:react-hooks/recommended",
    "plugin:jsx-a11y/recommended"
  ],
  "rules": {
    "jsx-a11y/click-events-have-key-events": "error",
    "jsx-a11y/no-noninteractive-element-interactions": "error",
    "jsx-a11y/aria-role": "error"
  }
}
```

### معايير الوصولية الإجبارية
```typescript
// يجب على كل مكون أن يتضمن:
interface ComponentProps {
  'aria-label'?: string;
  'aria-describedby'?: string;
  role?: string;
  tabIndex?: number;
}

// مثال صحيح:
<button
  aria-label="إغلاق النافذة"
  tabIndex={0}
  onClick={handleClose}
>
  ✕
</button>
```

---

## 🚨 قواعد مهمة للمطورين

### ❌ ممنوع تماماً:
```typescript
// ❌ لا تضع مفاتيح API في الكود الأمامي
const GOOGLE_MAPS_KEY = "AIzaSyABC123..."; // خطأ!

// ❌ لا تستخدم ألوان عشوائية
<div className="bg-red-500"> // خطأ!

// ❌ لا تنسى alt text للصور
<img src="image.jpg" /> // خطأ!

// ❌ لا تستخدم عناصر غير semantic
<div onClick={handleClick}>زر</div> // خطأ!
```

### ✅ الطريقة الصحيحة:
```typescript
// ✅ استخدم متغيرات البيئة
const googleMapsKey = process.env.GOOGLE_MAPS_API_KEY;

// ✅ استخدم الألوان المعتمدة
<div className="bg-[var(--color-light-beige)]">

// �� أضف alt text دائماً
<img src="image.jpg" alt="وصف الصورة" />

// ✅ استخدم عناصر semantic
<button onClick={handleClick} aria-label="وصف الزر">زر</button>
```

---

## 🧪 اختبار والتطوير

### تشغيل الاختبارات
```bash
# اختبار الكود
npm run test

# اختبار الوصولية
npm run test:a11y

# اختبار الأداء
npm run test:performance

# اختبار شامل
npm run test:all
```

### اختبار الوصولية يدوياً
```bash
# اختبار مع قارئ الشاشة
# تأكد من تثبيت NVDA أو JAWS

# اختبار التنقل بلوحة المفاتيح
# Tab, Shift+Tab, Enter, Space, Arrow keys

# اختبار التباين اللوني
# استخدم أدوات مثل WebAIM Contrast Checker
```

### أدوات مفيدة للتطوير
```json
// package.json scripts مفيدة
{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "test": "vitest",
    "test:a11y": "axe ./dist",
    "lint": "eslint . --ext ts,tsx",
    "lint:fix": "eslint . --ext ts,tsx --fix",
    "format": "prettier --write .",
    "type-check": "tsc --noEmit"
  }
}
```

---

## 📱 اختبار التجاوب

### أحجام الشاشة للاختبار:
```css
/* Mobile First - ابدأ من الصغير للكبير */
/* الافتراضي: 320px+ (أصغر الهواتف) */

@media (min-width: 640px) {
  /* الأجهزة اللوحية الصغيرة */
}

@media (min-width: 768px) {
  /* الأجهزة اللوحية */
}

@media (min-width: 1024px) {
  /* أجهزة الكمبيوتر المحمولة */
}

@media (min-width: 1280px) {
  /* أجهزة الكمبيوتر المكتبية */
}
```

### اختبار على أجهزة حقيقية:
```bash
# للوصول من الأجهزة الأخرى على نفس الشبكة
npm run dev -- --host

# سيكون متاحاً على:
# http://192.168.1.XXX:3000
```

---

## 🔧 أدوات مساعدة للتطوير

### 1. مولد المكونات
```bash
# سكريبت لإنشاء مكون جديد
./scripts/create-component.sh MyNewComponent

# سينشئ:
# components/MyNewComponent.tsx
# components/MyNewComponent.test.tsx
# components/MyNewComponent.stories.tsx
```

### 2. فحص الوصولية التلقائي
```typescript
// utils/a11yChecker.ts
export const checkAccessibility = (element: HTMLElement) => {
  const issues = [];
  
  // فحص alt text للصور
  const images = element.querySelectorAll('img');
  images.forEach(img => {
    if (!img.alt) {
      issues.push(`Image missing alt text: ${img.src}`);
    }
  });
  
  // فحص aria-labels للأزرار
  const buttons = element.querySelectorAll('button');
  buttons.forEach(button => {
    if (!button.textContent && !button.getAttribute('aria-label')) {
      issues.push('Button missing label');
    }
  });
  
  return issues;
};
```

### 3. مراقب الأداء
```typescript
// utils/performanceMonitor.ts
export const measurePerformance = (componentName: string) => {
  const start = performance.now();
  
  return () => {
    const end = performance.now();
    console.log(`${componentName} rendered in ${end - start}ms`);
  };
};

// الاستخدام في المكون:
const Component = () => {
  const endMeasure = measurePerformance('MyComponent');
  
  useEffect(() => {
    endMeasure();
  }, []);
  
  return <div>المحتوى</div>;
};
```

---

## 📚 موارد للتعلم والمراجعة

### وثائق مهمة:
- [WCAG 2.2 Guidelines](https://www.w3.org/WAI/WCAG22/quickref/)
- [React Accessibility](https://react.dev/reference/react-dom/components#accessibility)
- [Tailwind CSS Docs](https://tailwindcss.com/docs)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)

### أدوات اختبار الوصولية:
- [axe DevTools](https://www.deque.com/axe/devtools/) - امتداد المتصفح
- [WAVE](https://wave.webaim.org/) - أداة ويب
- [Lighthouse](https://developers.google.com/web/tools/lighthouse) - مدمج في Chrome
- [Color Contrast Analyzer](https://www.colour-contrast-analyser.org/)

### مجتمعات مفيدة:
- [WebAIM Community](https://webaim.org/discussion/)
- [A11Y Slack](https://web-a11y.slack.com/)
- [React Community](https://reactjs.org/community/support.html)

---

## 🐛 استكشاف الأخطاء وإصلاحها

### مشاكل شائعة وحلولها:

#### 1. "Cannot find module" خطأ
```bash
# حل: إعادة تثبيت الحزم
rm -rf node_modules package-lock.json
npm install
```

#### 2. مشاكل TypeScript
```bash
# حل: تنظيف cache وإعادة البناء
npm run type-check
npx tsc --build --clean
```

#### 3. مشاكل Tailwind CSS
```bash
# تأكد من أن الملفات في tailwind.config.js
# أعد تشغيل الخادم
npm run dev
```

#### 4. مشاكل الوصولية
```typescript
// استخدم أدوات التشخيص
import { checkAccessibility } from './utils/a11yChecker';

useEffect(() => {
  const issues = checkAccessibility(document.body);
  if (issues.length > 0) {
    console.warn('Accessibility issues found:', issues);
  }
}, []);
```

---

## 🚀 النشر والإنتاج

### بناء المشروع للإنتاج:
```bash
# بناء مُحسَّن للإنتاج
npm run build

# معاينة البناء محلياً
npm run preview

# فحص حجم الحزمة
npm run analyze
```

### فحوصات ما قبل النشر:
```bash
# قائمة مراجعة شاملة
npm run pre-deploy

# تتضمن:
# - اختبار الكود
# - فحص الوصولية  
# - فحص الألداء
# - فحص الأمان
# - تحسين الصور
```

---

## 📞 الدعم والمساعدة

### للمطورين الجدد:
- **البريد الإلكتروني**: dev-support@waslah.com
- **Slack**: #waslah-developers
- **ساعات العمل**: 9 صباحاً - 6 مساءً (UTC+3)

### للمسائل التقنية العاجلة:
- **الهاتف**: +962-X-XXXX-XXXX
- **WhatsApp**: متوفر 24/7
- **GitHub Issues**: للمشاكل والطلبات

### للمراجعة والكود:
- **Code Review**: يتم بواسطة فريق كبار المطورين
- **Pull Requests**: يجب الحصول على موافقة شخصين على الأقل
- **Documentation**: يجب توثيق أي ميزة جديدة

---

*تم إعداد هذا الدليل بتاريخ: سبتمبر 2024*
*آخر تحديث: سبتمبر 2024*

---

© 2024 وصلة - جسرٌ نحو مجتمع شامل. جميع الحقوق محفوظة.